{% extends "layout.html" %}
{% block form %}

	{% if data=='intro' %}
	<script type="text/javascript">
		$("#myModalIntro").modal("show");
	</script> 	
    {% endif %}

    {% if data == 'success' %}
	<script type="text/javascript">
		$("#myModalSuccess").modal("show");
		document.getElementById("commandPanelId").innerHTML = ""
		document.getElementById("commandPanelId").innerHTML = "<span style='color:#e25b5b; font-weight: bold;'>+ Details of Query +</span><br> {% for detail in details %} <p> <i class='fa fa-circle-thin'> {{ detail }} </i></p> {% endfor %}"

	</script> 	
    {% endif %}

    <!-- ERROR -->
    {% if data!='intro' and data != 'success' %}
	<script type="text/javascript">
		$("#myModalError").modal("show");
		document.getElementById("modalBodyErrorId").innerHTML = "";
		document.getElementById("modalBodyErrorId").innerHTML = "<p>{{ data }}</p>";

	</script> 	
    {% endif %}


	<div class="container-contact100">
		<div class="wrap-contact100">
			<form method="POST" action="/search">
			<!-- <form class="formId"> -->
				<span class="contact100-form-title" style="color: #4c8464; padding-bottom: 15px;">
					<i class="fa fa-pagelines" style="font-size: 1.2em;"></i> FAIR 
				</span>
				<div class="col-md-12 text-center" style="padding-bottom: 20px;">
					<p style="margin: auto; color: #898989; font-size: 0.95em;">Fast Adapter Identification and Removal of NGS data. </p>
				</div>

				<div class="wrap-input100 input100-select">
					<span class="label-input100">* Layout</span>
					<div>
						<select id="cbLayoutId" class="selection-2" name="layoutName">
							<option value="single" selected="true">Single</option>
							<option value="paired">Paired</option>
						</select>
					</div>
					{% if form %}
						{% if form.layoutName=='paired' %}
						<script type="text/javascript">
							document.getElementById("cbLayoutId").value = "paired";
						</script>
						{% endif %}
					{% endif %}
					<span class="focus-input100"></span>

					<div id="panelSingleId" style="display: block;padding: 20px;">
					<span class="label-input100" style="color: orange !important;">Single File</span>
					<input type="file" id="singleFileId" name="singleFileName"><br>
					</div>

					<div id="panelPairedId" style="display: none; padding: 10px;">
					<span class="label-input100" style="color: orange !important;">Forward File</span>
					<input type="file" id="forwardFileId" name="forwardFileName" style="padding: 10px;"><br>

					<span class="label-input100" style="color: orange !important;">Reverse File</span>
					<input type="file" id="reverseFileId" name="reverseFileName" style="padding: 10px;"><br>
					</div>
					
				</div>

					<div class="input100-select">
					<span class="label-input100">* Identify or Remove?</span>
					<div>
						<select id="cbIdentifyRemoveId" class="selection-2" name="identifyRemoveName">
							<option value="onlyRemove" selected="true">Only Remove</option>
							<option value="onlyIdentify">Only Identify</option>
						</select>
					</div>
					{% if form %}
						{% if form.identifyRemoveName=='onlyIdentify' %}
						<script type="text/javascript">
							document.getElementById("cbIdentifyRemoveId").value = "onlyIdentify";
						</script>
						{% endif %}
					{% endif %}

					<div class="row" id="panelSingleAdaptersId">

						<div class="col-md-12">
						<div class="wrap-input100 validate-input" data-validate="">
						<!-- <span class="label-input100">Single Adapter</span> -->
						
						<input maxlength="64" id="singleAdapterId" style="font-size: 0.85em; margin-top: 15px;" class="input100" type="text" name="singleAdapterName" placeholder="* Single Adapter" value="{% if form %}{{ form['singleAdapterName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						<div class="col-md-12">

						<div class="col-md-12"><span class="label-input100">Mismatch Rate</span></div>

						<div class="" style="width:50%; display: inline-block; padding: 10px; ">
						<div class="wrap-input100 validate-input" data-validate="">
						<input maxlength="2" style="font-size: 0.8em;" class="input100 text-center" type="text" name="singleMismatchName" placeholder="Mismatch Max. 5'/3' [default: 2 bases]" value="{% if form %}{{ form['singleMismatchName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						<div class="" style="width:50%; display: inline-block; margin-right: 0vw; float: right;padding: 10px; ">
						<div class="wrap-input100 validate-input" data-validate="">
						<input style="font-size: 0.8em;" class="input100 text-center" type="text" name="rightMismatchName" placeholder="Mismatch Max. in Region 3' [default: 0.5]" value="{% if form %}{{ form['rightMismatchName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						</div>


					</div>
 

					<div class="row" id="panelPairedAdaptersId" style="display: none;">

						<div class="col-md-12">
						<div class="wrap-input100 validate-input" data-validate="">
						<!-- <span class="label-input100">Forward Adapter</span> -->
						<input maxlength="64" style="font-size: 0.85em; margin-top: 15px;" class="input100" type="text" name="forwardAdapterName" placeholder="* Forward Adapter" value="{% if form %}{{ form['forwardAdapterName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						<div class="col-md-12">
						<div class="wrap-input100 validate-input" data-validate="">
						<!-- <span class="label-input100">Reverse Adapter</span> -->
						<input maxlength="64" style="font-size: 0.85em;" class="input100" type="text" name="reverseAdapterName" placeholder="* Reverse Adapter" value="{% if form %}{{ form['reverseAdapterName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						<div class="col-md-12">

						<div class="col-md-12"><span class="label-input100">Mismatch</span></div>

						<div class="" style="width:50%; display: inline-block; padding: 10px; ">
						<div class="wrap-input100 validate-input" data-validate="">
						<input maxlength="2" style="font-size: 0.8em;" class="input100 text-center" type="text" name="pairedMismatchName" placeholder="Mismatch Max. 5'/3' [default: 2 bases]" value="{% if form %}{{ form['pairedMismatchName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						<div class="" style="width:50%; display: inline-block; margin-right: 0vw; float: right;padding: 10px; ">
						<div class="wrap-input100 validate-input" data-validate="">
						<input style="font-size: 0.8em;" class="input100 text-center" type="text" name="rightPairedMismatchName" placeholder="Mismatch Max. in Region 3' [default: 0.5]" value="{% if form %}{{ form['rightPairedMismatchName'] }}{% endif %}">
						<span class="focus-input100"></span>
						</div>
						</div>

						</div>

					</div>

					<span class="focus-input100"></span>
					</div>

					<div id="panelQualityId" class="wrap-input100 input100-select">
						<span class="label-input100">Quality</span>
							<select class="selection-2" id="cbTrimQualityId" name="trimQualityName">
								<option value="off" selected="true">No Trim</option>
								<option value="n">Trim (N)</option>
								<option value="quality">Trim per Quality and (N)</option>
							</select>
							{% if form %}
								{% if form.trimQualityName=='n' %}
								<script type="text/javascript">
									document.getElementById("cbTrimQualityId").value = "n";
								</script>
								{% endif %}
								{% if form.trimQualityName=='quality' %}
								<script type="text/javascript">
									document.getElementById("cbTrimQualityId").value = "quality";
								</script>
								{% endif %}
							{% endif %}
						<div class="col-md-12">
							<input style=" margin-top: 15px;" name="minQualityName" type="text" id="minQualityId" placeholder="* Min Quality" style="display: none;" value="{% if form %}{{ form['minQualityName'] }}{% endif %}">
						</div>
					</div>

				<div id="panelPhreadId" class="wrap-input100 input100-select">
					<span class="label-input100">Phread</span>
					<div>
						<select id="cbPhreadId" class="selection-2" name="phreadName">
							<option value="auto" selected="true">Auto</option>
							<option value="32">32</option>
							<option value="64">64</option>
						</select>
					</div>
							{% if form %}
								{% if form.phreadName=='32' %}
								<script type="text/javascript">
									document.getElementById("cbPhreadId").value = "32";
								</script>
								{% endif %}
								{% if form.phreadName=='64' %}
								<script type="text/javascript">
									document.getElementById("cbPhreadId").value = "64";
								</script>
								{% endif %}
							{% endif %}
					<span class="focus-input100"></span>
				</div>

				
			<!-- 	<div class="wrap-input100 validate-input" data-validate = "Message is required">
					<span class="label-input100">Message</span>
					<textarea class="input100" name="message" placeholder="Your message here..."></textarea>
					<span class="focus-input100"></span>
				</div> -->

				<div class="container-contact100-form-btn" style="margin-top: 25px;">
					<div class="wrap-contact100-form-btn" style="width: 250px;">
						<div class="contact100-form-bgbtn"></div>
						<button class="contact100-form-btn" onclick="">
							<span>
								<span id="btnTrimIdentifyId">Trim</span>
								<i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
							</span>
						</button>
					</div>
				</div>

<!-- 				<button class="btn btn-primary" onclick="submit_entry()">
							<span>
								<span id="btnTrimIdentifyId">Trim</span>
								<i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
							</span>
				</button> -->

				<!-- <input type="submit" name=""> -->
				
			<!-- </div> -->
			</form>
		</div>
	</div>



	<div id="dropDownSelect1"></div>


	<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script> -->
<script type="text/javascript">
  // window.dataLayer = window.dataLayer || [];
  // function gtag(){dataLayer.push(arguments);}
  // gtag('js', new Date());

  // gtag('config', 'UA-23581568-13');

// VERIFICACAO INICIAL DE PARAMETROS SELECIONADOS
  var value = document.getElementById("cbTrimQualityId").value;
  if(value === "quality")
 	{
	  	document.getElementById("minQualityId").style.display = 'block';
	  	document.getElementById("minQualityId").focus();
 	}
  	else
  	document.getElementById("minQualityId").style.display = 'none';

  	var value = document.getElementById("cbLayoutId").value;
 	if(value === "single")
 	{
 		value = document.getElementById("cbIdentifyRemoveId").value;
 		if(value === "onlyRemove")
 		{
	 		document.getElementById("panelSingleAdaptersId").style.display = 'block';
	 		document.getElementById("panelPairedAdaptersId").style.display = 'none'; 			
 		}

 		document.getElementById("panelSingleId").style.display = 'block';
 		document.getElementById("panelPairedId").style.display = 'none';
 	}
 	else if(value === "paired")
 	{
 		value = document.getElementById("cbIdentifyRemoveId").value;
 		if(value === "onlyRemove")
 		{
	 		document.getElementById("panelSingleAdaptersId").style.display = 'none';
	 		document.getElementById("panelPairedAdaptersId").style.display = 'block'; 			
 		}
 		document.getElementById("panelPairedId").style.display = 'block';
 		document.getElementById("panelSingleId").style.display = 'none';
 	}

	var value = document.getElementById("cbIdentifyRemoveId").value;
 	if(value === "onlyIdentify")
 	{

  	document.getElementById("btnTrimIdentifyId").innerHTML = "Identify";

		document.getElementById("panelQualityId").style.display = 'none';
 		document.getElementById("panelPhreadId").style.display = 'none';
 		document.getElementById("panelSingleAdaptersId").style.display = 'none';
 		document.getElementById("panelPairedAdaptersId").style.display = 'none';
 	}
 	if(value === "onlyRemove")
 	{

  	document.getElementById("btnTrimIdentifyId").innerHTML = "Trim";

 		var layout = document.getElementById("cbLayoutId").value;

 		document.getElementById("panelQualityId").style.display = 'block';
 		document.getElementById("panelPhreadId").style.display = 'block';

 		if(layout === "single")
 		{
 			document.getElementById("panelSingleAdaptersId").style.display = 'block';
 			document.getElementById("panelPairedAdaptersId").style.display = 'none';
 		}
 		if(layout === "paired")
 		{
 			document.getElementById("panelPairedAdaptersId").style.display = 'block';
 			document.getElementById("panelSingleAdaptersId").style.display = 'none';
		}
 	}

 	// ===================================================================



  $("#cbTrimQualityId").on('change', function(e){

  	var value = document.getElementById("cbTrimQualityId").value;
 	if(value === "quality")
 	{
	  	document.getElementById("minQualityId").style.display = 'block';
	  	document.getElementById("minQualityId").focus();
 	}
  	else
  	document.getElementById("minQualityId").style.display = 'none';

      
  });

  $("#cbLayoutId").on('change', function(e){

  	var value = document.getElementById("cbLayoutId").value;
 	if(value === "single")
 	{
 		value = document.getElementById("cbIdentifyRemoveId").value;
 		if(value === "onlyRemove")
 		{
	 		document.getElementById("panelSingleAdaptersId").style.display = 'block';
	 		document.getElementById("panelPairedAdaptersId").style.display = 'none'; 			
 		}

 		document.getElementById("panelSingleId").style.display = 'block';
 		document.getElementById("panelPairedId").style.display = 'none';
 	}
 	else if(value === "paired")
 	{
 		value = document.getElementById("cbIdentifyRemoveId").value;
 		if(value === "onlyRemove")
 		{
	 		document.getElementById("panelSingleAdaptersId").style.display = 'none';
	 		document.getElementById("panelPairedAdaptersId").style.display = 'block'; 			
 		}
 		document.getElementById("panelPairedId").style.display = 'block';
 		document.getElementById("panelSingleId").style.display = 'none';
 	}


	});

   $("#cbIdentifyRemoveId").on('change', function(e){

  	var value = document.getElementById("cbIdentifyRemoveId").value;
 	if(value === "onlyIdentify")
 	{

  	document.getElementById("btnTrimIdentifyId").innerHTML = "Identify";

		document.getElementById("panelQualityId").style.display = 'none';
 		document.getElementById("panelPhreadId").style.display = 'none';
 		document.getElementById("panelSingleAdaptersId").style.display = 'none';
 		document.getElementById("panelPairedAdaptersId").style.display = 'none';
 	}
 	if(value === "onlyRemove")
 	{

  	document.getElementById("btnTrimIdentifyId").innerHTML = "Trim";

 		var layout = document.getElementById("cbLayoutId").value;

 		document.getElementById("panelQualityId").style.display = 'block';
 		document.getElementById("panelPhreadId").style.display = 'block';

 		if(layout === "single")
 		{
 			document.getElementById("panelSingleAdaptersId").style.display = 'block';
 			document.getElementById("panelPairedAdaptersId").style.display = 'none';
 		}
 		if(layout === "paired")
 		{
 			document.getElementById("panelPairedAdaptersId").style.display = 'block';
 			document.getElementById("panelSingleAdaptersId").style.display = 'none';
		}
 	}


	});

  

function sendForm(){

	var form = document.querySelector(".formId");
	form.method = 'post';
	form.action = '/search';

	var out = form.submit();

	console.log(out);

}

</script>

<style type="text/css">

.inputfile + label {
	cursor: pointer; /* "hand" cursor */
}

.inputfile {
	width: 0.1px;
	height: 0.1px;
	opacity: 0;
	overflow: hidden;
	position: absolute;
	z-index: -1;
}
	
	.inputfile + label {
    font-size: 1em;
    font-weight: 700;
    color: white;
    background-color: black;
    display: inline-block;
    padding: 5px;
}

.inputfile:focus + label,
.inputfile + label:hover {
    background-color: #4b8664;
}


</style>


{% endblock %}